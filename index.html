<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>band NATASHA</title>
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css?v=12">
</head>
<body>
  <!-- HEADER -->
  <header class="site-header">
    <nav class="nav wrap">
      <a class="brand" href="#hero">NATASHA</a>
      <div class="nav-links">
        <a href="#about">EP 소개</a>
        <a href="#tracks">곡 소개</a>
        <a href="#team">팀 소개</a>
        <a href="#rewards">선물</a>
        <a href="#listen">SNS</a>
      </div>
    </nav>
  </header>

  <!-- HERO -->
  <section id="hero" class="hero">
    <div class="hero-content wrap">
      <p class="kicker">EP • 열기</p>
      <h1>나타샤 EP <span class="accent">[열기]</span></h1>
      <p class="lead">
        한 해는 네 개의 계절, 열두 개의 달로 나뉘고,
        그 끝에서 우리의 감정은 각자의 궤적을 따라 흘러갑니다.
        나타샤는 그 흐름을 한 장의 EP에 담아 여러분께 전합니다.
      </p>
      <div class="hero-cta">
        <a class="btn btn-primary" href="#listen">음악 감상하기</a>
      </div>
    </div>
  </section>

  <main>
    <!-- ABOUT -->
    <section id="about" class="section">
      <div class="wrap">
        <h2 class="section-title">EP 소개</h2>
        <p class="muted">
          안녕하세요. 4인조 얼터너티브 록 밴드 나타샤입니다.
          2024년의 어느 날 시작된 우리의 여정은 어느덧 여기까지 닿았습니다.
          사랑을 꾹꾹 눌러 담아 만든 작은 EP, <b>[열기]</b>를 세상에 전합니다.
        </p>
      </div>
    </section>

    <!-- TRACKS (CSS+JS 인라인: index만 바꿔도 작동) -->
<section id="tracks" class="section">
  <div class="wrap">
    <h2 class="section-title">곡 소개</h2>

    <!-- Tracks: inline CSS (닫힘=검은 카드 / 열림=그라디언트) -->
    <style>
      #trkAccordion{ display:grid; gap:12px; }
      #trkAccordion .trk-item{
        --a:#22d3ee; --b:#3b82f6;   /* 기본값(각 아이템에서 덮어씀) */
        border:1px solid var(--border);
        border-radius: var(--radius);
        background: var(--card-bg);
        overflow:hidden;
        box-shadow: 0 8px 24px rgba(0,0,0,.18);
      }
      /* 닫힘 상태 */
      #trkAccordion .trk-hdr{
        all:unset; display:grid; width:100%;
        grid-template-columns:52px 1fr auto; align-items:center; gap:12px;
        cursor:pointer; user-select:none; padding:16px 16px;
        background:#151821; border-bottom:1px solid var(--border);
      }
      #trkAccordion .trk-hdr:hover{ filter:brightness(1.06); }
      #trkAccordion .trk-no{
        width:36px; height:36px; display:grid; place-items:center;
        border:1px solid var(--border); border-radius:10px;
        font-weight:800; color:var(--fg-colour); background:transparent;
      }
      #trkAccordion .trk-title{ font-weight:800; letter-spacing:.01em; color:var(--fg-colour); }
      #trkAccordion .trk-caret{ color:var(--muted-colour); transition:transform .25s ease; font-size:18px; }

      /* 열림 상태 */
      #trkAccordion .trk-item.open .trk-hdr{
        background: linear-gradient(90deg, var(--a) 0%, var(--b) 100%);
      }
      #trkAccordion .trk-item.open .trk-no{ background:var(--a); color:#fff; border-color:transparent; }
      #trkAccordion .trk-item.open .trk-title,
      #trkAccordion .trk-item.open .trk-caret{ color:#fff; }
      #trkAccordion .trk-item.open .trk-caret{ transform:rotate(180deg); }

      /* 패널(슬라이드) — 중요: !important 쓰지 말 것 */
      #trkAccordion .trk-panel{
        max-height:0; opacity:0; overflow:hidden;
        padding:0 18px;
        transition:max-height .35s ease, opacity .25s ease, padding .25s ease;
        background: linear-gradient(0deg, rgba(255,255,255,.02), rgba(255,255,255,0));
      }
      #trkAccordion .trk-item.open .trk-panel{ opacity:1; padding:16px 18px 18px; }

      #trkAccordion .trk-inner{ padding:0; border-left:none; }
      #trkAccordion .trk-lyric{ margin:0; line-height:1.8; letter-spacing:.01em; }
      #trkAccordion .trk-panel p + p{ margin-top:10px; }

      @media (max-width:720px){
        #trkAccordion .trk-hdr{ grid-template-columns:44px 1fr auto; padding:14px 14px; }
        #trkAccordion .trk-no{ width:32px; height:32px; }
      }
    </style>

    <div class="trk-accordion" id="trkAccordion">
      <!-- 01 탓 -->
      <div class="trk-item" style="--a:#22d3ee; --b:#3b82f6;">
        <button class="trk-hdr" type="button" aria-expanded="false">
          <span class="trk-no">01</span>
          <span class="trk-title">탓</span>
          <span class="trk-caret">▾</span>
        </button>
        <div class="trk-panel"><div class="trk-inner">
          <p class="trk-lyric">“그래서 널 위해 죽을 수 있냐면<br>뭐 그렇게까진 아냐”</p>
        </div></div>
      </div>

      <!-- 02 불가해 -->
      <div class="trk-item" style="--a:#6366f1; --b:#9333ea;">
        <button class="trk-hdr" type="button" aria-expanded="false">
          <span class="trk-no">02</span>
          <span class="trk-title">불가해</span>
          <span class="trk-caret">▾</span>
        </button>
        <div class="trk-panel"><div class="trk-inner">
          <p class="trk-lyric">“언젠간 너도 알게 되겠지<br>차갑기만한 눈길로는<br>이해못할 하루를 살아갈 수 없다는 걸”</p>
        </div></div>
      </div>

      <!-- 03 가시밭길 -->
      <div class="trk-item" style="--a:#0ea5e9; --b:#0f766e;">
        <button class="trk-hdr" type="button" aria-expanded="false">
          <span class="trk-no">03</span>
          <span class="trk-title">가시밭길</span>
          <span class="trk-caret">▾</span>
        </button>
        <div class="trk-panel"><div class="trk-inner">
          <p class="trk-lyric">“어제의 나는 무슨 망상을 했을까<br>오늘의 나를 기대하고 있었던 걸까”</p>
        </div></div>
      </div>

      <!-- 04 열기 -->
      <div class="trk-item" style="--a:#f97316; --b:#ef4444;">
        <button class="trk-hdr" type="button" aria-expanded="false">
          <span class="trk-no">04</span>
          <span class="trk-title">열기</span>
          <span class="trk-caret">▾</span>
        </button>
        <div class="trk-panel"><div class="trk-inner">
          <p class="trk-lyric">“계절 끝에 숨은 우리의 약속들을<br>언젠가 모두 다 잊어버린다 해도”</p>
        </div></div>
      </div>
    </div>
  </div>

  <!-- Tracks: inline JS (안정적 높이 계산) -->
  <script>
    (function(){
      const items = Array.from(document.querySelectorAll('#trkAccordion .trk-item'));
      if(!items.length) return;

      const setClosed = (panel)=>{
        panel.style.transition = 'none';
        panel.style.maxHeight = '0px';
        panel.style.overflow  = 'hidden';
        void panel.offsetHeight; // reflow 고정
        panel.style.transition = 'max-height .35s ease, opacity .25s ease, padding .25s ease';
      };

      const openItem = (it)=>{
        if(it.classList.contains('open')) return;
        const panel = it.querySelector('.trk-panel');
        const btn   = it.querySelector('.trk-hdr');
        btn.setAttribute('aria-expanded','true');
        it.classList.add('open');

        // 0 -> target 높이로 전환
        panel.style.overflow = 'hidden';
        panel.style.maxHeight = '0px';
        void panel.offsetHeight;                         // reflow
        const target = panel.scrollHeight;
        panel.style.maxHeight = target + 'px';

        // 전환 끝나면 auto로 전환
        const onEnd = (e)=>{
          if(e.propertyName!=='max-height') return;
          panel.style.maxHeight = 'none';
          panel.style.overflow  = 'visible';
          panel.removeEventListener('transitionend', onEnd);
        };
        panel.addEventListener('transitionend', onEnd);
      };

      const closeItem = (it)=>{
        if(!it.classList.contains('open')) return;
        const panel = it.querySelector('.trk-panel');
        const btn   = it.querySelector('.trk-hdr');
        btn.setAttribute('aria-expanded','false');

        // auto였으면 현재 높이 숫자로 고정 후 0으로
        if (panel.style.maxHeight === 'none' || getComputedStyle(panel).maxHeight === 'none') {
          panel.style.maxHeight = panel.scrollHeight + 'px';
          void panel.offsetHeight;
        }
        it.classList.remove('open');
        panel.style.overflow = 'hidden';
        panel.style.maxHeight = '0px';
      };

      // init & bind
      items.forEach(it=>{
        const btn = it.querySelector('.trk-hdr');
        const panel = it.querySelector('.trk-panel');
        setClosed(panel);
        btn.onclick = ()=>{
          const was = it.classList.contains('open');
          items.forEach(o=>{ if(o!==it) closeItem(o); });
          was ? closeItem(it) : openItem(it);
        };
      });

      // 리사이즈/폰트 로드 시 열린 항목 보정
      const recalc = ()=>{
        const open = document.querySelector('#trkAccordion .trk-item.open .trk-panel');
        if(!open) return;
        open.style.maxHeight = 'none';
        const h = open.scrollHeight;
        open.style.maxHeight = h + 'px';
        requestAnimationFrame(()=>{ open.style.maxHeight = 'none'; });
      };
      window.addEventListener('resize', recalc);
      if (document.fonts && document.fonts.ready) document.fonts.ready.then(recalc).catch(()=>{});
    })();
  </script>
</section>
